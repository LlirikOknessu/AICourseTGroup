schema: '2.0'
stages:
  data_preparation:
    cmd: python data_preparation.py -id data/raw -od data/prepared -p params.yaml
    deps:
    - path: data/raw/test_scores.csv
      hash: md5
      md5: dedbbc2822e89a304dc36cb350198b37
      size: 171367
    - path: data_preparation.py
      hash: md5
      md5: 99b944153c6481d0c4361a00a6e1a5fe
      size: 2969
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        data_preparation:
          train_test_ratio: 0.8
          train_val_ratio: 0.75
          random_state: 42
    outs:
    - path: data/prepared
      hash: md5
      md5: 1f4b09b612e0a1437e01e9e297e591ab.dir
      size: 146846
      nfiles: 8
  linear_regression:
    cmd: python linear_regression.py -id data/prepared -od data/models -mn linear_regression_model
      -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 1f4b09b612e0a1437e01e9e297e591ab.dir
      size: 146846
      nfiles: 8
    - path: linear_regression.py
      hash: md5
      md5: b5d4810c342490309061263a9aeb2f79
      size: 1528
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
    outs:
    - path: data/models/linear_regression_model.csv
      hash: md5
      md5: 0635473e55868fed56087503aa7ce512
      size: 312
    - path: data/models/linear_regression_model.joblib
      hash: md5
      md5: 9b5e4418eae482f8f1b79bf8037b23ef
      size: 1167
  linear_regression_validation:
    cmd: python linear_regression_validation.py -id data/prepared -im data/models/linear_regression_model.joblib
      -p params.yaml
    deps:
    - path: data/models/linear_regression_model.joblib
      hash: md5
      md5: 9b5e4418eae482f8f1b79bf8037b23ef
      size: 1167
    - path: data/prepared
      hash: md5
      md5: 1f4b09b612e0a1437e01e9e297e591ab.dir
      size: 146846
      nfiles: 8
    - path: linear_regression_validation.py
      hash: md5
      md5: b7d286230b5069529298a77de5fd021c
      size: 1449
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
  linear_regression_prod_version:
    cmd: python linear_regression_full.py -id data/prepared -od data/models -mn linear_regression_model
      -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 1f4b09b612e0a1437e01e9e297e591ab.dir
      size: 146846
      nfiles: 8
    - path: linear_regression_full.py
      hash: md5
      md5: 2ea56caead0eafb6e58ae24a2d3fca53
      size: 1680
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
    outs:
    - path: data/models/linear_regression_model_prod.joblib
      hash: md5
      md5: 1ec1a9f0e8217a6e95b82780095d6673
      size: 1167
    - path: data/models/linear_regression_model_prod_coefficients.csv
      hash: md5
      md5: 2c30c01f6249872c0f46cf8ff0ccac54
      size: 335
  gru_train:
    cmd: python gru_train.py -id data/prepared -od data/models -mn gru_model -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 1f4b09b612e0a1437e01e9e297e591ab.dir
      size: 146846
      nfiles: 8
    - path: gru_train.py
      hash: md5
      md5: b0570f235a4eeb86deb67e4614bed3a3
      size: 2581
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        gru:
          gru_units: 50
          optimizer: adam
          loss: mse
          epochs: 100
          batch_size: 32
    outs:
    - path: data/models/gru_model.h5
      hash: md5
      md5: 9dc57e4c4fedf4a39102e9cf91a759ba
      size: 140688
    - path: data/models/gru_model_scaler.pkl
      hash: md5
      md5: 9f5980a139cd879ea3ebce709d46fc28
      size: 1319
  gru_validation:
    cmd: python gru_validation.py -id data/prepared -im data/models/gru_model.h5 -p
      params.yaml
    deps:
    - path: data/models/gru_model.h5
      hash: md5
      md5: 9dc57e4c4fedf4a39102e9cf91a759ba
      size: 140688
    - path: data/models/gru_model_scaler.pkl
      hash: md5
      md5: 9f5980a139cd879ea3ebce709d46fc28
      size: 1319
    - path: data/prepared
      hash: md5
      md5: 1f4b09b612e0a1437e01e9e297e591ab.dir
      size: 146846
      nfiles: 8
    - path: gru_validation.py
      hash: md5
      md5: 1f75881e3465d0a2d1c449d382bbc179
      size: 1712
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        gru:
          gru_units: 50
          optimizer: adam
          loss: mse
          epochs: 100
          batch_size: 32
