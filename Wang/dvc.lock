schema: '2.0'
stages:
  data_preparation:
    cmd: python data_preparation.py -id data/raw -od data/prepared -p params.yaml
    deps:
    - path: data/raw/housing.csv
      hash: md5
      md5: 2baa110b179b261b9efbdbeda1e8537a
      size: 1323849
    - path: data_preparation.py
      hash: md5
      md5: 9a8e23f7ad2f80f4ab4bc27f775ec707
      size: 2974
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        data_preparation:
          train_test_ratio: 0.8
          train_val_ratio: 0.75
          random_state: 42
    outs:
    - path: data/prepared
      hash: md5
      md5: 97ec7e7b688b067ec913379e05b73999.dir
      size: 3278896
      nfiles: 8
  linear_regression:
    cmd: python linear_regression.py -id data/prepared -od data/models -mn linear_regression_model
      -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 97ec7e7b688b067ec913379e05b73999.dir
      size: 3278896
      nfiles: 8
    - path: linear_regression.py
      hash: md5
      md5: 37a4c7b55dde3b280552c6fd16aeeefb
      size: 1414
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
    outs:
    - path: data/models/linear_regression_model.csv
      hash: md5
      md5: 21d61cbaaea692e54b83c09c0764d415
      size: 260
    - path: data/models/linear_regression_model.joblib
      hash: md5
      md5: a7ab0d86252b7d9ed0dcc04b9e37e98a
      size: 1311
  linear_regression_validation:
    cmd: python linear_regression_validation.py -id data/prepared/ -im data/models/linear_regression_model.joblib
      -p params.yaml
    deps:
    - path: data/models/linear_regression_model.joblib
      hash: md5
      md5: a7ab0d86252b7d9ed0dcc04b9e37e98a
      size: 1311
    - path: data/prepared/
      hash: md5
      md5: 97ec7e7b688b067ec913379e05b73999.dir
      size: 3278896
      nfiles: 8
    - path: linear_regression_validation.py
      hash: md5
      md5: 6c35e0dfd7ea359e0737459f987e4524
      size: 1455
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
  linear_regression_prod_version:
    cmd: python linear_regression_full.py -id data/prepared/ -od data/models/ -mn
      linear_regression_model -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 97ec7e7b688b067ec913379e05b73999.dir
      size: 3278896
      nfiles: 8
    - path: linear_regression_full.py
      hash: md5
      md5: 2ea56caead0eafb6e58ae24a2d3fca53
      size: 1680
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
    outs:
    - path: data/models/linear_regression_model_prod.joblib
      hash: md5
      md5: bb459c2bf6e88559007e61deb9ac7031
      size: 1311
    - path: data/models/linear_regression_model_prod_coefficients.csv
      hash: md5
      md5: 1f1a45616d9b005da74a72b334453b9a
      size: 451
  gru_train:
    cmd: python gru_train.py -id data/prepared -od data/models -mn gru_model -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 97ec7e7b688b067ec913379e05b73999.dir
      size: 3278896
      nfiles: 8
    - path: gru_train.py
      hash: md5
      md5: b0570f235a4eeb86deb67e4614bed3a3
      size: 2581
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        gru:
          gru_units: 50
          optimizer: adam
          loss: mse
          epochs: 100
          batch_size: 32
    outs:
    - path: data/models/gru_model.h5
      hash: md5
      md5: 98c8aa2ef43ae46534051967d6eb86f4
      size: 144288
    - path: data/models/gru_model_scaler.pkl
      hash: md5
      md5: 8dbf5cd06c265679e27026a21d323773
      size: 1463
  gru_validation:
    cmd: python gru_validation.py -id data/prepared -im data/models/gru_model.h5 -p
      params.yaml
    deps:
    - path: data/models/gru_model.h5
      hash: md5
      md5: 98c8aa2ef43ae46534051967d6eb86f4
      size: 144288
    - path: data/models/gru_model_scaler.pkl
      hash: md5
      md5: 8dbf5cd06c265679e27026a21d323773
      size: 1463
    - path: data/prepared/
      hash: md5
      md5: 97ec7e7b688b067ec913379e05b73999.dir
      size: 3278896
      nfiles: 8
    - path: gru_validation.py
      hash: md5
      md5: 1f75881e3465d0a2d1c449d382bbc179
      size: 1712
    - path: params.yaml
      hash: md5
      md5: 0502c02646fd5fd70f3326fd5592c349
      size: 246
    params:
      params.yaml:
        gru:
          gru_units: 50
          optimizer: adam
          loss: mse
          epochs: 100
          batch_size: 32
