schema: '2.0'
stages:
  data_preparation:
    cmd: python data_preparation.py -id data/raw -od data/prepared -p params.yaml
    deps:
    - path: data/raw/life_expectancy_data.csv
      hash: md5
      md5: 000b9918a92597a09c645549d5a54993
      size: 337245
    - path: data_preparation.py
      hash: md5
      md5: 4c54f38982d8af820b55680ce7566034
      size: 3001
    - path: params.yaml
      hash: md5
      md5: 704ba563db76c657517ae915404b5710
      size: 269
    params:
      params.yaml:
        data_preparation:
          train_test_ratio: 0.8
          train_val_ratio: 0.75
          random_state: 42
    outs:
    - path: data/prepared
      hash: md5
      md5: 2ccb4382c5162b129ddb2071f571b1d4.dir
      size: 624796
      nfiles: 8
  linear_regression:
    cmd: python linear_regression.py -id data/prepared -od data/models -mn linear_regression_model
      -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 2ccb4382c5162b129ddb2071f571b1d4.dir
      size: 624796
      nfiles: 8
    - path: linear_regression.py
      hash: md5
      md5: b5d4810c342490309061263a9aeb2f79
      size: 1528
    - path: params.yaml
      hash: md5
      md5: 704ba563db76c657517ae915404b5710
      size: 269
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
    outs:
    - path: data/models/linear_regression_model.csv
      hash: md5
      md5: d535ee04de5b90d48d646f1f22e6e351
      size: 711
    - path: data/models/linear_regression_model.joblib
      hash: md5
      md5: 9924332751af838df2d26321068ce269
      size: 1583
  linear_regression_validation:
    cmd: python linear_regression_validation.py -id data/prepared -im data/models/linear_regression_model.joblib
      -p params.yaml
    deps:
    - path: data/models/linear_regression_model.joblib
      hash: md5
      md5: 9924332751af838df2d26321068ce269
      size: 1583
    - path: data/prepared/
      hash: md5
      md5: 2ccb4382c5162b129ddb2071f571b1d4.dir
      size: 624796
      nfiles: 8
    - path: linear_regression_validation.py
      hash: md5
      md5: 6c35e0dfd7ea359e0737459f987e4524
      size: 1455
    - path: params.yaml
      hash: md5
      md5: 704ba563db76c657517ae915404b5710
      size: 269
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
  linear_regression_prod_version:
    cmd: python linear_regression_full.py -id data/prepared -od data/models -mn linear_regression_model
      -p params.yaml
    deps:
    - path: data/prepared
      hash: md5
      md5: 2ccb4382c5162b129ddb2071f571b1d4.dir
      size: 624796
      nfiles: 8
    - path: linear_regression_full.py
      hash: md5
      md5: 2ea56caead0eafb6e58ae24a2d3fca53
      size: 1680
    - path: params.yaml
      hash: md5
      md5: 704ba563db76c657517ae915404b5710
      size: 269
    params:
      params.yaml:
        linear_regression:
          model_name: linear_regression_model
    outs:
    - path: data/models/linear_regression_model_prod.joblib
      hash: md5
      md5: b3c57eadafe19b85464946bf7650c454
      size: 1583
    - path: data/models/linear_regression_model_prod_coefficients.csv
      hash: md5
      md5: aa4718e75c5f2376fab1f537526ade57
      size: 745
  bp_model_train:
    cmd: python bp_train.py -id data/prepared -od data/models -mn bp_model -p params.yaml
    deps:
    - path: bp_train.py
      hash: md5
      md5: ed98e555f42730a47792d12ee93174d5
      size: 1900
    - path: data/prepared
      hash: md5
      md5: 2ccb4382c5162b129ddb2071f571b1d4.dir
      size: 624796
      nfiles: 8
    - path: params.yaml
      hash: md5
      md5: 704ba563db76c657517ae915404b5710
      size: 269
    params:
      params.yaml:
        bp_model:
          hidden_units: 64
          optimizer: adam
          loss: mean_squared_error
          epochs: 100
          batch_size: 32
    outs:
    - path: data/models/bp_model.h5
      hash: md5
      md5: 40d5238735253403309caa6aba0308ed
      size: 42360
    - path: data/models/bp_model_scaler.pkl
      hash: md5
      md5: c0fe9004b035ccc00a11ad19ebb430b2
      size: 1791
  bp_model_validation:
    cmd: python bp_model_validation.py -id data/prepared -im data/models/bp_model.h5
      -p params.yaml
    deps:
    - path: bp_model_validation.py
      hash: md5
      md5: 69c84a14c4bdf0cfa056fd2bf400f79f
      size: 1567
    - path: data/models/bp_model.h5
      hash: md5
      md5: 40d5238735253403309caa6aba0308ed
      size: 42360
    - path: data/models/bp_model_scaler.pkl
      hash: md5
      md5: c0fe9004b035ccc00a11ad19ebb430b2
      size: 1791
    - path: data/prepared/
      hash: md5
      md5: 2ccb4382c5162b129ddb2071f571b1d4.dir
      size: 624796
      nfiles: 8
    - path: params.yaml
      hash: md5
      md5: 704ba563db76c657517ae915404b5710
      size: 269
    params:
      params.yaml:
        bp_model:
          hidden_units: 64
          optimizer: adam
          loss: mean_squared_error
          epochs: 100
          batch_size: 32
